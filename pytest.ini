[tool:pytest]
# PyTest configuration per IMPLEMENT_FROM_DOCS.md requirements
# Enforces 100% coverage with branch coverage

testpaths = backend/tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Coverage enforcement with 100% threshold
addopts =
    --cov=backend/app
    --cov-report=html:backend/htmlcov
    --cov-report=term-missing
    --cov-report=xml:backend/coverage.xml
    --cov-report=json:backend/coverage.json
    --cov-fail-under=100
    --cov-branch
    --strict-markers
    --strict-config
    --disable-warnings
    -v
    -n auto

# Async test support
asyncio_mode = auto

# Test markers for organization
markers =
    unit: Unit tests for individual components
    integration: Integration tests across modules
    performance: Performance and SLO tests
    slow: Slow running tests

# Minimum version requirements
minversion = 7.0

[coverage:run]
# Coverage configuration per IMPLEMENT_FROM_DOCS.md
source = backend/app
branch = true
omit =
    backend/app/__pycache__/*
    backend/app/main.py
    backend/tests/*
    */venv/*
    */site-packages/*

[coverage:report]
# Report configuration with 100% enforcement
precision = 2
show_missing = true
skip_covered = false
fail_under = 100

# Exclude common boilerplate from coverage
exclude_lines =
    pragma: no cover
    def __repr__
    def __str__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    @abstractmethod

[coverage:html]
directory = backend/htmlcov
title = TurtleTrading Backend Coverage Report

[coverage:xml]
output = backend/coverage.xml

[coverage:json]
output = backend/coverage.json